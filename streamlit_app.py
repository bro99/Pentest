
from logging import error
import sys
import ipaddress
from ipaddress import IPv4Interface
import streamlit as st
#Remoção da marca d'agua

hide_streamlit_style = """
            <style>
            #MainMenu {visibility: hidden;}
            footer {visibility: hidden;}
            </style>
            """
st.markdown(hide_streamlit_style, unsafe_allow_html=True) 


st.title('Calculadora IPv4')
prefixo = st.text_input("Olá, por gentileza, informe o IP para conversão:")
number = st.selectbox(
     'Qual Novo Prefixo?',
     ('8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '24', '25', '26', '27', '28', '29', '30', '31', '32'))
number_int = int(number)


st.write()
IpList = []
try:
    st.write('Você selecionou o Prefixo:', number_int)
    st.write("Esses são os IPs convertidos")
    IpList = ipaddress.ip_network(prefixo, False)
    ipconvert = list(IpList.subnets(new_prefix=number_int))
    #Aqui ele pega o ip escolhido e coloca conforme o prefixo escolhido pelo user
    quantidadeip = 0
    quantidadeip = (len(ipconvert))
    #Coloquei para pegar quantidade de prefixos
    st.write("Quantidade de IP sendo convertidos é: ", quantidadeip)
    st.write("Processando.......")
    st.write(' - - - - - - - - - - - - - - - - - - - - - - - - - - -')
    contadordeloop = 0
    i = 0
    for i in range(quantidadeip):
        vartemp = ipconvert[i]
        ifc = IPv4Interface(vartemp).ip
        #Essa variavel, vai receber o RETURN da função de verificação de IP
        st.write(ifc)

except ValueError:
    if TypeError == 'exceptions must derive from BaseException':
        pass
    else:
        pass
